(()=>{"use strict";var e={d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{idAbActiveTransfers:()=>Ie,idAbAddBuyDelay:()=>K,idAbAddFilterGK:()=>Q,idAbAvailableItems:()=>_e,idAbBidExact:()=>F,idAbBidFutBin:()=>lt,idAbBuyPrice:()=>I,idAbCardCount:()=>M,idAbCloseTabToggle:()=>X,idAbCoins:()=>Ce,idAbCountDown:()=>mt,idAbCustomDiscordNameNotificationToggle:()=>ee,idAbCycleAmount:()=>U,idAbDelayToAdd:()=>Y,idAbDontMoveWon:()=>dt,idAbDownloadFilter:()=>ze,idAbDownloadStats:()=>pt,idAbFiltersFileToUpload:()=>tt,idAbFiltersToUpload:()=>Ge,idAbIgnoreAllowToggle:()=>st,idAbItemExpiring:()=>E,idAbMaxBid:()=>x,idAbMaxPurchases:()=>Bt,idAbMaxRating:()=>q,idAbMaxSearchPage:()=>J,idAbMessageNotificationToggle:()=>Z,idAbMinDeleteCount:()=>N,idAbMinRating:()=>H,idAbNumberFilterSearch:()=>Me,idAbOverSearchWarning:()=>$t,idAbPauseFor:()=>O,idAbProfit:()=>Je,idAbRandMinBidInput:()=>V,idAbRandMinBidToggle:()=>G,idAbRandMinBuyInput:()=>j,idAbRandMinBuyToggle:()=>z,idAbReportProblem:()=>ut,idAbRequestCount:()=>we,idAbResumeAfterErrorOccured:()=>ct,idAbSearchProgress:()=>Se,idAbSearchResult:()=>D,idAbSellPrice:()=>R,idAbSellToggle:()=>k,idAbSendListingNotificationToggle:()=>te,idAbShouldSort:()=>ft,idAbSoldItems:()=>Pe,idAbSolveCaptcha:()=>he,idAbSortBy:()=>gt,idAbSortOrder:()=>bt,idAbSoundToggle:()=>ie,idAbStatisticsProgress:()=>ve,idAbStatus:()=>Be,idAbStopAfter:()=>W,idAbStopErrorCode:()=>xe,idAbStopErrorCodeCount:()=>De,idAbToggleRunner:()=>at,idAbUnsoldItems:()=>Te,idAbUploadBtn:()=>it,idAbUploadFilter:()=>je,idAbUseFutWiz:()=>Pt,idAbWaitTime:()=>L,idAddIgnorePlayers:()=>Qe,idAddIgnorePlayersList:()=>Ze,idAntiCaptchKey:()=>Ue,idAutoClearExpired:()=>nt,idAutoClearLog:()=>We,idBtnActions:()=>yt,idBtnReport:()=>ht,idBuyFutBinPercent:()=>ot,idBuyFutBinPrice:()=>rt,idCalcBinPrice:()=>ge,idCapatchaMp3:()=>Re,idClearLogButton:()=>pe,idDeleteFilter:()=>ye,idDiscordChannelId:()=>ae,idDiscordToken:()=>oe,idFUTMarketAlertToken:()=>le,idFilterDropdown:()=>P,idFilterDropdownHeader:()=>T,idFinishMp3:()=>wt,idFutBinDuration:()=>et,idInfoWrapper:()=>ue,idLog:()=>Ct,idNotificationType:()=>re,idPreserveChanges:()=>me,idProgressAutobuyer:()=>de,idProxyAddress:()=>Ne,idProxyLogin:()=>Le,idProxyPassword:()=>Oe,idProxyPort:()=>ke,idRemoveIgnorePlayers:()=>Xe,idRunFilterSequential:()=>Ye,idSearchCancelButton:()=>ce,idSearchWrapper:()=>Ee,idSelectFilterCount:()=>fe,idSelectedFilter:()=>_,idSellAfterTax:()=>Ae,idSellCheckBuyPrice:()=>Ke,idSellFutBinPercent:()=>Ve,idSellFutBinPrice:()=>qe,idSellRatingThreshold:()=>He,idSession:()=>St,idTelegramBotToken:()=>ne,idTelegramChatId:()=>se,idTestNotification:()=>be,idTooltip:()=>At,idWebHookUrl:()=>vt,idWinCount:()=>$e,idWinMp3:()=>Fe});const i="Paused",n="Stopped",s={521:"Request Rejected",512:"Request Rejected",429:"Too many request from this user",426:"Other user won the (card / bid)",461:"Other user won the (card / bid)"},r={idBuyFutBinPercent:95,idAbCardCount:1e3,idAbCardCountisDefaultValue:!0,idAbItemExpiring:"1H",idAbItemExpiringisDefaultValue:!0,idAbSearchResult:21,idAbSearchResultisDefaultValue:!0,idSellFutBinPercent:"105-110",idFutBinDuration:"1H",idFutBinDurationisDefaultValue:!0,idAbMinDeleteCount:10,idSellRatingThreshold:100,idSellRatingThresholdisDefaultValue:!0,idAbMinRating:10,idAbMinRatingisDefaultValue:!0,idAbMaxRating:100,idAbMaxRatingisDefaultValue:!0,idAbMaxSearchPage:5,idAbMaxSearchPageisDefaultValue:!0,idAbRandMinBidInput:300,idAbRandMinBidInputisDefaultValue:!0,idAbRandMinBuyInput:300,idAbRandMinBuyInputisDefaultValue:!0,idBuyFutBinPrice:!0,idSellFutBinPrice:!0,idSellCheckBuyPrice:!0,idAbSellToggle:!1,idAbRandMinBidToggle:!0},o={idAbAddBuyDelay:!0,idAbCycleAmount:"15-20",idAbDelayToAdd:"3S",idAbMaxPurchases:1,idAbNumberFilterSearch:3,idAbNumberFilterSearchisDefaultValue:!0,idAbPauseFor:"15-30S",idAbSoundToggle:!0,idAbStopAfter:"1-2H",idAbStopErrorCodeCount:3,idAbWaitTime:"5-8",idAbWaitTimeisDefaultValue:!1,idAutoClearExpired:!0,idAutoClearLog:!0},a=!!window.ReactNativeWebView,l=new Map,d=(e,t)=>{l.set(e,t)},c=e=>{const t=l.get(e);return t&&t.expiryTimeStamp&&t.expiryTimeStamp<Date.now()?(l.delete(e),null):t},u=(e=!1)=>{const t=c("BuyerSettings")||{};if(e)return t;const i=c("CommonSettings")||{};return Object.assign({},t,i)},m=e=>{let t=c(e)||0;return t++,d(e,t),t},p=()=>((c("CommonSettings")||{}).idAbUseFutWiz?"futwiz":"futbin").toUpperCase(),g=e=>{let t="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<e;n++)t+=i.charAt(Math.floor(62*Math.random()));return t},b=async(e=1)=>{const t=Math.floor(Math.random());await new Promise(i=>setTimeout(i,1e3*(t+e)))},f=e=>{if(e){let t=(e+="")[e.length-1].toUpperCase(),i=h(e.substring(0,e.length-1))/1e3;return i&&(i*="M"===t?60:"H"===t?3600:1),i}return 0},y=e=>{const t=v(e);return t.length>=2?S(t[0],t[1]):t[0]||0},h=e=>{if(e){const[t,i]=e.split("-").map(e=>parseInt(e));return 1e3*Math.round(Math.random()*(i-t)+t)}return 0},A=e=>{if(e){let t=e[e.length-1].toUpperCase(),i=parseInt(e.substring(0,e.length-1));return i&&(i*="M"===t?60:"H"===t?3600:1),i}return 0},S=(e,t)=>Math.round(Math.random()*(t-e)+e),v=e=>e?(e+"").split("-").map(e=>parseInt(e)):[],w=(e,t)=>(e.length<=t&&(e+=" ".repeat(t-e.length)),e),C=function(e){const t=u();if(!a&&t.idAbSoundToggle){let t=document.getElementById(Fe);"capatcha"==e?t=document.getElementById(Re):"finish"==e?t=document.getElementById(wt):"cardWon"==e&&(t=document.getElementById(Fe)),t.currentTime=0,t.play()}},B=function(e){for(let i of Object.keys(e)){const n=e[i];if(e[i+"isDefaultValue"])continue;const s=`#${t[i]}`;if("boolean"==typeof n){if(n){$(s).addClass("toggled");continue}$(s).removeClass("toggled")}else $(s).val(n)}},P="elem_"+g(15),T="elem_"+g(15),_="elem_"+g(15),I="elem_"+g(15),M="elem_"+g(15),x="elem_"+g(15),D="elem_"+g(15),E="elem_"+g(15),F="elem_"+g(15),R="elem_"+g(15),N="elem_"+g(15),k="elem_"+g(15),L="elem_"+g(15),U="elem_"+g(15),O="elem_"+g(15),W="elem_"+g(15),H="elem_"+g(15),q="elem_"+g(15),V="elem_"+g(15),j="elem_"+g(15),z="elem_"+g(15),G="elem_"+g(15),J="elem_"+g(15),K="elem_"+g(15),Y="elem_"+g(15),Q="elem_"+g(15),X="elem_"+g(15),Z="elem_"+g(15),ee="elem_"+g(15),te="elem_"+g(15),ie="elem_"+g(15),ne="elem_"+g(15),se="elem_"+g(15),re="elem_"+g(15),oe="elem_"+g(15),ae="elem_"+g(15),le="elem_"+g(15),de="elem_"+g(15),ce="elem_"+g(15),ue="elem_"+g(15),me="elem_"+g(15),pe="elem_"+g(15),ge="elem_"+g(15),be="elem_"+g(15),fe="elem_"+g(15),ye="elem_"+g(15),he="elem_"+g(15),Ae="elem_"+g(15),Se="elem_"+g(15),ve="elem_"+g(15),we="elem_"+g(15),Ce="elem_"+g(15),$e="elem_"+g(15),Be="elem_"+g(15),Pe="elem_"+g(15),Te="elem_"+g(15),_e="elem_"+g(15),Ie="elem_"+g(15),Me="elem_"+g(15),xe="elem_"+g(15),De="elem_"+g(15),Ee="elem_"+g(15),Fe="elem_"+g(15),Re="elem_"+g(15),Ne="elem_"+g(15),ke="elem_"+g(15),Le="elem_"+g(15),Ue="elem_"+g(15),Oe="elem_"+g(15),We="elem_"+g(15),He="elem_"+g(15),qe="elem_"+g(15),Ve="elem_"+g(15),je="elem_"+g(15),ze="elem_"+g(15),Ge="elem_"+g(15),Je="elem_"+g(15),Ke="elem_"+g(15),Ye="elem_"+g(15),Qe="elem_"+g(15),Xe="elem_"+g(15),Ze="elem_"+g(15),et="elem_"+g(15),tt="elem_"+g(15),it="elem_"+g(15),nt="elem_"+g(15),st="elem_"+g(15),rt="elem_"+g(15),ot="elem_"+g(15),at="elem_"+g(15),lt="elem_"+g(15),dt="elem_"+g(15),ct="elem_"+g(15),ut="elem_"+g(15),mt="elem_"+g(15),pt="elem_"+g(15),gt="elem_"+g(15),bt="elem_"+g(15),ft="elem_"+g(15),yt="elem_"+g(15),ht="elem_"+g(15),At="elem_"+g(15),St=g(15),vt="elem_"+g(15),wt="elem_"+g(15),Ct="elem_"+g(15),$t="elem_"+g(15),Bt="elem_"+g(15),Pt="elem_"+g(15);d("sessionStats",{soldItems:"-",unsoldItems:"-",activeTransfers:"-",availableItems:"-",coins:"-",winCount:0,coinsNumber:0,previousPause:0,searchCount:0,profit:0,transactions:[],searchPerMinuteCount:0});const Tt=(e,t)=>{const i=c("sessionStats");i[e]=t,d("sessionStats",i)},_t=e=>c("sessionStats")[e]||0;let It=new Set;const Mt=(e,t,i,n,s=!1)=>{const r=c(t)||{};"number"===n&&(i=parseInt(i)),r[e]=i||null,r[e+"isDefaultValue"]=s,d(t,r)},xt=(e,t,i,n,s,r="number",o=".*",a="buyer-settings-field",l=null)=>{const d=Object.keys(i)[0];return t&&(l&&l(t),Mt(d,s,t,r,!0)),It.has(d)||($(document).on("input",`#${i[d]}`,({target:{value:e}})=>{l&&l(e),Mt(d,s,e||t,r,!e)}),It.add(d)),`<div class="price-filter ${a}">\n       <div class="info">\n           <span class="secondary label">${e} :<br/><small>${n}</small></span>\n       </div>\n       <div class="buttonInfo">\n           <div class="inputBox">\n               <input pattern="${o}" type="${r}" class="numericInput" id='${i[d]}' placeholder=${t}>\n           </div>\n       </div>\n    </div>`};let Dt=new Set;const Et=(e,t,i,n,s="buyer-settings-field",r=null)=>{const o=Object.keys(t)[0];return Dt.has(o)||($(document).on("click touchend",`#${t[o]}`,e=>{!r&&((e,t,i)=>{const n=c(t)||{};n[e]?(n[e]=!1,$(i.currentTarget).removeClass("toggled")):(n[e]=!0,$(i.currentTarget).addClass("toggled")),d(t,n)})(o,n,e),r&&r(e)}),Dt.add(o)),`\n    <div class="price-filter  ${s}">\n        <div class="ut-toggle-cell-view">\n           <span class="ut-toggle-cell-view--label">${e} <br/><small>${i}</small></span>\n             <div id='${t[o]}' class="ut-toggle-control">\n               <div class="ut-toggle-control--track">\n              </div>\n              <div class= "ut-toggle-control--grip" >\n          </div> \n           </div> \n       </div>\n    </div> `},Ft=function(){const e=p();return`<div class='buyer-settings-wrapper buy-settings-view'>\n      ${Et("Find Buy Price",{idBuyFutBinPrice:rt},`(Uses ${e} price for Buy)`,"BuyerSettings")}\n      ${xt("Buy/Bid Price Percent",100,{idBuyFutBinPercent:ot},`(Buy/Bid Price percent of ${e} Price)`,"BuyerSettings")}\n      ${Et(`Bid For ${e} Price`,{idAbBidFutBin:lt},`(Bid if the current bid is lesser than ${e} Price)`,"BuyerSettings")}\n      ${xt("Buy Price","",{idAbBuyPrice:I},"<br/>","BuyerSettings")}\n      ${xt("No. of cards to buy",1e3,{idAbCardCount:M},"(Works only with Buy price)","BuyerSettings")}\n      ${xt("Bid Price","",{idAbMaxBid:x},"<br/>","BuyerSettings")}\n      ${xt("Bid items expiring in","1H",{idAbItemExpiring:E},"(S for seconds, M for Minutes, H for hours)","BuyerSettings","text","\\d+[H|M|S|h|m|s]$")} \n      ${xt("Search result threshold",21,{idAbSearchResult:D},"(Buy or bid cards only if the no.of search results is lesser than the specified value)","BuyerSettings")}\n      ${Et("Bid Exact Price",{idAbBidExact:F},"","BuyerSettings")}      \n     </div>\n    `};$(document).on("keyup","#"+R,function({target:{value:e}}){Rt(e)});const Rt=e=>{const t=parseInt(e);if(isNaN(t))return void $("#"+Ae).html(0);const i=(e-e/100*5).toLocaleString();$("#"+Ae).html(i)},Nt=function(){const e=p();return`<div style='display : none' class='buyer-settings-wrapper sell-settings-view'>\n  ${Et("Find Sale Price",{idSellFutBinPrice:qe},`(Uses ${e} price for listing)`,"BuyerSettings")}\n  ${xt("Sell Price Percent","100-100",{idSellFutBinPercent:Ve},`(Sale Price percent of ${e} Price)`,"BuyerSettings","text","\\d+-\\d+$")}\n  ${Et("Check buy price before listing",{idSellCheckBuyPrice:Ke},"(List only if Buy Price is lesser than Sale Price)","BuyerSettings")}\n  ${xt("Sell Price","",{idAbSellPrice:R},`(-1 to send to transferlist)<br />Receive After Tax: <span id=${Ae}>0</span>`,"BuyerSettings")} \n   ${xt("List Duration","1H",{idFutBinDuration:et},"List Duration when listing","BuyerSettings","text","\\d+[H|M|S|h|m|s]$")}\n  ${xt("Clear sold count",10,{idAbMinDeleteCount:N},"(Clear sold items when reach a specified count)","BuyerSettings")}\n  ${xt("Rating Threshold",100,{idSellRatingThreshold:He},"(Rating threshold to list the sniped player)","BuyerSettings")}\n  ${Et("Relist Unsold Items",{idAbSellToggle:k},"","BuyerSettings")}\n  ${Et("Dont move won items",{idAbDontMoveWon:dt},"(Keep won items in Unassigned or Transfer Targets)","BuyerSettings")}\n  </div>`},kt=function(){return`<div style='display : none' class='buyer-settings-wrapper safety-settings-view'>\n  ${xt("Wait Time","7-15",{idAbWaitTime:L},"(Random second range eg. 7-15)","CommonSettings","text","\\d+-\\d+$")}\n  ${xt("Max purchases per search request",1,{idAbMaxPurchases:Bt},"Increase this, only if you are Adding Delay After Buy of alteast 3S","CommonSettings")}\n  ${xt("Pause Cycle","10-15",{idAbCycleAmount:U},"(No. of searches performed before triggering Pause eg. 10-15)","CommonSettings","text","\\d+-\\d+$")}\n  ${xt("Pause For","5-8S",{idAbPauseFor:O},"(S for seconds, M for Minutes, H for hours eg. 0-0S)","CommonSettings","text","\\d+-\\d+[H|M|S|h|m|s]$")}\n  ${Et("Add Delay After Buy",{idAbAddBuyDelay:K},"(Adds Delay after trying to buy / bid a card)","CommonSettings")}\n  ${xt("Delay To Add","1S",{idAbDelayToAdd:Y},"(S for seconds, M for Minutes, H for hours)","CommonSettings","text","\\d+[H|M|S|h|m|s]$")}\n  ${xt("Stop After","3-4H",{idAbStopAfter:W},"(S for seconds, M for Minutes, H for hours  eg. 3-4H)","CommonSettings","text","\\d+-\\d+[H|M|S|h|m|s]$")}\n  ${Et("Show Search Exceed Warning",{idAbOverSearchWarning:$t},"(Shows a warning in log if number of search per minute exceeds 15)","CommonSettings")} \n  </div>`},Lt=function(){return`<div style='display : none' class='buyer-settings-wrapper captcha-settings-view'>\n    ${Et("Close Web App on Captcha Trigger",{idAbCloseTabToggle:X},"","CommonSettings")}         \n    ${Et("Auto Solve Captcha",{idAbSolveCaptcha:he},"","CommonSettings")}\n    ${xt("Anti-Captcha Key","",{idAntiCaptchKey:Ue},"","CommonSettings","text")}\n    ${xt("Proxy Address","",{idProxyAddress:Ne},"","CommonSettings","text")}\n    ${xt("Proxy Port","",{idProxyPort:ke},"","CommonSettings")}\n    ${xt("Proxy User Name (Optional)","",{idProxyLogin:Le},"","CommonSettings","text")}\n    ${xt("Proxy User Password (Optional)","",{idProxyPassword:Oe},"","CommonSettings","text")} \n    `};let Ut=new Set;const Ot=(e,t,i,n)=>(Ut.has(e)||(Wt(e,i),Ut.add(e)),`<button class="btn-standard ${n}" id="${e}">${t}</button>`),Wt=(e,t)=>{$(document).on({mouseenter:function(){$(this).addClass("hover")},mouseleave:function(){$(this).removeClass("hover")},click:function(){t()},touchenter:function(){$(this).addClass("hover")},touchleave:function(){$(this).removeClass("hover")},touchend:function(){t()}},`#${e}`)},Ht=function(){return`<div style='display : none' class='buyer-settings-wrapper notification-settings-view'> \n ${a?"":`${xt("Telegram Bot Token","",{idTelegramBotToken:ne},"Token of your own bot","CommonSettings","text")}\n  ${xt("Telegram Chat ID","",{idTelegramChatId:se},"Your Telegram ChatID","CommonSettings","text")}\n  ${xt("Discord Bot Token","",{idDiscordToken:oe},"Your Discord Bot Token","CommonSettings","text")}\n  ${xt("Discord Channel ID","",{idDiscordChannelId:ae},"Your Discord Channel ID","CommonSettings","text")}\n  ${xt("Discord WebHook Url","",{idWebHookUrl:vt},"Your Discord Channel Webhook Url","CommonSettings","text")}\n  ${xt("Fut Market Alert Notification Token","",{idFUTMarketAlertToken:le},"Your FUT Market Alert App's Token","CommonSettings","text")}\n  ${Et("Send Listing Notification",{idAbSendListingNotificationToggle:te},"","CommonSettings")}`}\n  ${xt("Notification Type","",{idNotificationType:re},"Type A for all notifications, B for buy or L for lost","CommonSettings","text","[A|B|L]$")}\n  ${Et("Send Notification",{idAbMessageNotificationToggle:Z},"","CommonSettings")}\n   ${a?"":`${Et("Sound Notification",{idAbSoundToggle:ie},"","CommonSettings")}\n  <audio id='${Fe}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-869-coins.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${Re}' hidden>\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.ogg" type="audio/ogg">\n    <source src="https://notificationsounds.com/storage/sounds/file-sounds-897-alarm-frenzy.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio>\n  <audio id='${wt}' hidden>\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.ogg" type="audio/ogg">\n    <source src="https://freesound.org/data/previews/220/220763_4104696-lq.mp3" type="audio/mpeg">\n      "Your browser does not support the audio element"\n  </audio> `}\n     ${Et("Use Custom Discord Webhook Name",{idAbCustomDiscordNameNotificationToggle:ee},"","CommonSettings")}\n   <div class="btn-test-notification buyer-settings-field">\n   ${Ot(be,"Test Notification",()=>bi("Test Notification Message",!0,!0),"call-to-action")}\n   </div>\n  `},qt=function(){return`<div style='display : none' class='buyer-settings-wrapper common-settings-view'>\n  ${xt("Error Codes to stop bot (csv)","",{idAbStopErrorCode:xe},"(Eg. 412,421,521)","CommonSettings","text","^\\d+(,\\d+)*$")}\n  ${xt("No. of times error code should occur",3,{idAbStopErrorCodeCount:De},"<br />","CommonSettings")}\n  ${xt("Resume bot after","",{idAbResumeAfterErrorOccured:ct},"(S for seconds, M for Minutes, H for hours eg. 0-0S)","CommonSettings","text","\\d+-\\d+[H|M|S|h|m|s]$")}\n  ${Et("Auto Clear Log",{idAutoClearLog:We},"(Automatically clear logs every 2 minutes)","CommonSettings")}\n  ${Et("Auto Clear Expired Items",{idAutoClearExpired:nt},"(Automatically clear expired items from transfer targets)","CommonSettings")}\n  ${Et("Use Futwiz Price",{idAbUseFutWiz:Pt},"(Uses Futwiz price for buying/selling cards)","CommonSettings")}\n  </div>`},Vt=function(e,t){let i=!1;return $(`${e} option`).each(function(){if(this.value===t)return i=!0,!1}),i||$(e).append($("<option></option>").attr("value",t).text(t)),i},jt=function(){const e=$(`#${_}`).val()||[];e.length?d("selectedFilters",e):d("selectedFilters",[])};let zt;$(document).on({change:()=>{const e=$(`#${gt}`).val()||"buy",t=c("BuyerSettings")||{};t.idAbSortBy=e,d("BuyerSettings",t)}},`#${gt}`);const Gt=function(){if("function"!=typeof UTPlayerSearchControl)return $('<div class="price-filter buyer-settings-field">\n        <div class="info">\n          <span class="secondary label">\n            Players List :<br/>\n            <small>Player search is unavailable. Open the MagicBuyer tab in the web app first.</small>\n          </span>\n        </div>\n      </div>');zt=new UTPlayerSearchControl;const e=`#${Ze}`,t=$(`\n            <div class="price-filter buyer-settings-field">\n              <div class="info">\n               <span class="secondary label">\n                  <button id=${At} style="font-size:16px" class="flat camel-case">Players List</button><br/>\n                </span>\n              </div>\n              <div class="ignore-players displayCenterFlx">\n                ${Ot(Qe,"+",()=>{const t=`${zt._playerNameInput.value}(${zt.selected.rating})`,i=Vt(e,t);if($(`${e} option[value="${t}"]`).attr("selected",!0),!i){const e=c("BuyerSettings")||{},i=e.idAddIgnorePlayersList||[];i.push({id:zt.selected.id,displayName:t}),e.idAddIgnorePlayersList=i,d("BuyerSettings",e)}},"btn-standard filterSync action-icons")}                \n                </div>\n              </div>\n              <div class="price-filter buyer-settings-field">\n                <div class="info">\n                <span class="secondary label">\n                  <button id=${At} style="font-size:16px" class="flat camel-case">Remove from Players List</button><br/>\n                </span>\n                </div>\n                <div class="displayCenterFlx">\n                  <select style="width:90%;height: 3rem;font-size: 1.5rem;" class="filter-header-settings" id=${Ze}>\n                    <option selected="true" disabled>Players List</option>                            \n                  </select>\n                  ${Ot(Xe,"❌",()=>{const t=$(`${e} option`).filter(":selected").val();if("Ignored Players List"!=t){$(`${e} option[value="${t}"]`).remove(),$(`${e}`).prop("selectedIndex",0);const i=c("BuyerSettings")||{};let n=i.idAddIgnorePlayersList||[];n=n.filter(({displayName:e})=>e!=t),i.idAddIgnorePlayersList=n,d("BuyerSettings",i)}},"btn-standard filterSync font15 action-icons")}\n                </div>\n              </div>              \n              `);return zt&&($(zt.__root).insertBefore(t.find(`#${Qe}`)),zt.init(),zt._playerNameInput.setPlaceholder("Search Players")),t},Jt=function(){const e=$(`<div style='display : none' class='buyer-settings-wrapper results-filter-view'>\n    <div class="place-holder">\n    </div>\n    ${Et("Ignore/Buy Players List",{idAbIgnoreAllowToggle:st},"(If toggled bot will only buy/bid the above players else bot will ignore the players when bidding/buying )","BuyerSettings")}\n    ${xt("Min Rating",10,{idAbMinRating:H},"Minimum Player Rating","BuyerSettings")}\n    ${xt("Max Rating",100,{idAbMaxRating:q},"Maximum Player Rating","BuyerSettings")}    \n    ${xt("Search result page limit",5,{idAbMaxSearchPage:J},"No of. pages bot should move forward before going back to page 1","BuyerSettings")}\n    ${xt("Max value of random min bid",300,{idAbRandMinBidInput:V},"","BuyerSettings")}\n    ${Et("Use random min bid",{idAbRandMinBidToggle:G},"","BuyerSettings")}\n    ${xt("Max value of random min buy",300,{idAbRandMinBuyInput:j},"","BuyerSettings")}\n    ${Et("Use random min buy",{idAbRandMinBuyToggle:z},"","BuyerSettings")}\n    ${Et("SKIP GK",{idAbAddFilterGK:Q},"(Skip all goalkeepers to buy / bid a card)","BuyerSettings")}\n    ${Et("Sort players",{idAbShouldSort:ft},"","BuyerSettings")}\n    <div class="price-filter buyer-settings-field">\n      <div class="displayCenterFlx">\n      <select style="width:95%;height: 3rem;font-size: 1.5rem;" class="select-sortBy filter-header-settings" id="${gt}">\n        <option disabled selected>--Select Sort Attribute--</option>\n        <option value="expires">Expires on</option>          \n        <option value="buy">Buy now price</option>\n        <option value="bid">Bid now price</option>\n        <option value="rating">Player rating</option>\n      </select>\n      </div>\n    </div>\n    ${Et("Order",{idAbSortOrder:bt},"(Enabled = descending, Disabled = ascending)","BuyerSettings")}\n  </div>`),t=e.find(".place-holder");return Gt().insertAfter(t),e};let Kt;const Yt=(e="Filters")=>new Promise((t,i)=>{const n=Kt.transaction(e,"readonly").objectStore(e).getAll();n.onsuccess=function(){const e={};if(n.result.length)for(let t=0;t<n.result.length;t++)e[n.result[t].filterName]=n.result[t].jsonData;t(e)},n.onerror=function(){i()}}),Qt=(e="Filters")=>Yt(e);$(document).on({touchend:function(){$(`#${tt}`).trigger("click")}},`#${tt}`);const Xt=async()=>{c("filters")||d("filters",await Qt()||{});let e=c("filters");return e=Object.keys(e).sort().reduce((t,i)=>(t[i]=e[i],t),{}),e},Zt=async()=>Object.keys(await Xt());$(document).on({change:jt,click:jt,touchend:jt},`#${_}`);const ei=(e,t)=>{let i=c(t);return i?(i=!1,$(e.currentTarget).removeClass("toggled")):(i=!0,$(e.currentTarget).addClass("toggled")),d(t,i),i},ti=async function(){return c("runSequentially")&&(d("runSequentially",!1),setTimeout(()=>{$(`#${Ye}`).click()})),`<div style='display : none' class='buyer-settings-wrapper filter-settings-view'>\n                <div class="price-filter buyer-settings-field multiple-filter teleporter">\n                    <select  multiple="multiple" class="multiselect-filter filter-header-settings" id="${_}"\n                     name="selectedFilters" style="overflow-y : scroll;">\n                     ${Object.keys(await Xt()).map(e=>`<option value='${e}'>${e}</option>`)}\n                    </select>\n                </div>\n                ${xt("No. of search For each filter",c("fiterSearchCount")||3,{idAbNumberFilterSearch:Me},"(Count of searches performed before switching to another filter)","CommonSettings","number",null,"buyer-settings-field",e=>d("fiterSearchCount",parseInt(e)||3))}\n                ${Et("Switch filter sequentially",{idRunFilterSequential:Ye},"","CommonSettings","buyer-settings-field",e=>ei(e,"runSequentially"))}\n            </div>\n    `},ii=new Map;let ni,si;ii.set(0,{label:"Buy/Bid Settings",selector:".buy-settings-view"}),ii.set(1,{label:"Sell Settings",selector:".sell-settings-view"}),ii.set(2,{label:"Search Settings",selector:".results-filter-view"}),ii.set(3,{label:"Safety Settings",selector:".safety-settings-view"}),ii.set(4,{label:"Filter Settings",selector:".filter-settings-view"}),ii.set(5,{label:"Captcha Settings",selector:".captcha-settings-view"}),ii.set(6,{label:"Notification Settings",selector:".notification-settings-view"}),ii.set(7,{label:"Common Settings",selector:".common-settings-view"});const ri=async e=>{let t=await Qt("CommonSettings");if(t=JSON.parse(t.CommonSettings||"{}"),!$.isEmptyObject(t)){const i=e?c("CommonSettings"):{};d("CommonSettings",Object.assign({},i,t))}},oi=async function(e){si.setActiveTab(0),d("activeSettingsTab",0),ni.append(Ft.call(this)),ni.append(Nt.call(this)),ni.append(Jt.call(this)),ni.append(kt.call(this));const t=await ti.call(this);ni.append(t),ni.append(Lt.call(this)),ni.append(Ht.call(this)),ni.append(qt.call(this)),$(".menu-container").animate({scrollLeft:0}),setTimeout(async()=>{const t=c("selectedFilters")||[],{idAbSortBy:i}=c("BuyerSettings")||{};i&&$(`${gt} option[value='${i}']`).prop("selected","selected"),$.each(t,function(e,t){$(".multiselect-filter option[value='"+t+"']").prop("selected","selected")}),e&&await ri()})},ai=()=>{ii.forEach((e,t)=>{$(e.selector).remove()}),zt&&"function"==typeof zt.destroy&&zt.destroy(),zt=null},li=()=>{ii.forEach((e,t)=>{$(e.selector).css("display","none")})},di=()=>{d("currentFilter",null),d("BuyerSettings",{}),d("currentFilter",{})},ci=()=>{document.querySelectorAll(":invalid").length&&pi("Settings with invalid value found, fix these values for autobuyer to work as intended",UINotificationType.NEGATIVE)},ui=async function(e,t){if("_default"===e)return(()=>{d("BuyerSettings",Object.assign({},r)),d("CommonSettings",Object.assign({},o));const e=u();B(e)})(),!1;c("runnerToggle")||t||await async function(){ai(),di(),await oi();const e=c("AutoBuyerInstance");UTMarketSearchFiltersViewController.prototype._eResetSelected.call(e)}();const i=c("filters")[e];if(!i)return!1;let{searchCriteria:{criteria:n,playerData:s,buyerSettings:a}}=JSON.parse(i);if(this.viewmodel.resetSearch(),this.viewDidAppear(),this.viewmodel.playerData={},Object.assign(this.viewmodel.searchCriteria,n),Object.assign(this.viewmodel.playerData,s),$.isEmptyObject(this.viewmodel.playerData)&&(this.viewmodel.playerData=null),this.viewDidAppear(),t)return;await ri();const l=c("CommonSettings")||{};if(d("BuyerSettings",a),d("currentFilter",e),a=Object.assign({},a,l),B(a),a.idAddIgnorePlayersList&&a.idAddIgnorePlayersList.length)for(let{displayName:e}of a.idAddIgnorePlayersList)Vt(`#${Ze}`,e);return ci(),!0};let mi=null;const pi=function(e,t){t=t||UINotificationType.POSITIVE,services.Notification.queue([e,t])},gi=e=>{services.PIN.sendData(PINEventType.PAGE_VIEW,{type:PIN_PAGEVIEW_EVT_TYPE,pgid:e})},bi=(e,t,i)=>{const n=u();(n.idAbMessageNotificationToggle||i)&&(a?fi(e):Ai(n,t,e),i&&pi("Test Notification Sent"))},fi=e=>{window.ReactNativeWebView.postMessage(JSON.stringify({type:"Notification",message:e}))},yi=(e,t,i)=>{let n={embeds:[{description:e,color:t?2555648:16711680,footer:{text:`Auto Buyer Alert - ${(new Date).toLocaleTimeString()}`,icon_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp"}}],avatar_url:"https://cdn.discordapp.com/icons/768336764447621122/9de9ea0a7c6239e2f2fbfbd716189e79.webp",username:"Fut Market Alert"};return i&&delete n.username,n},hi=e=>{const{embeds:[t]}=e;return(new Discord.RichEmbed).setColor(t.color).setDescription(t.description).setFooter(t.footer.text,t.footer.icon_url)},Ai=(e,t,i)=>{const n=e.idTelegramBotToken,s=e.idTelegramChatId,r=e.idWebHookUrl,o=e.idDiscordChannelId,a=e.idFUTMarketAlertToken,l=e.idAbCustomDiscordNameNotificationToggle;Si(n,s,i),wi(o,t,i,l),vi(r,t,i,l),$i(a,i)},Si=(e,t,i)=>{if(e&&t){const n=`https://api.telegram.org/bot${e}/sendMessage?chat_id=${t}&parse_mode=Markdown&text=${i}`,s=new XMLHttpRequest;s.open("GET",n,!0),s.send()}},vi=(e,t,i,n)=>{e&&fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(yi(i,t,n))})},wi=(e,t,i,n)=>{if(e)if(mi){const s=mi.channels.get(e);s&&s.send(hi(yi(i,t,n)))}else mi=Ci(()=>{setTimeout(()=>{if(mi){const s=mi.channels.get(e);s&&s.send(hi(yi(i,t,n)))}},200)})},Ci=e=>{const t=u(),i=new Discord.Client;let n=t.idDiscordToken;if(!n)return null;try{i.login(n),i.on("ready",function(){e&&e()}),i.on("message",async function(e){if(e.author.id!=i.user.id)if(/start/i.test(e.content)){const t=c("AutoBuyerInstance");hn.call(t),e.channel.send(hi(yi("Bot started successfully",!0)))}else if(/stop/i.test(e.content))An(),e.channel.send(hi(yi("Bot stopped successfully",!0)));else if(/runfilter/i.test(e.content)){let t=e.content.split("-")[1];if(t){t=t.toUpperCase(),An(),d("selectedFilters",[]);const i=c("AutoBuyerInstance");if(!await ui.call(i,t))return void e.channel.send(hi(yi(`unable to find filter${t}`,!1)));hn.call(i),e.channel.send(hi(yi(`${t} started successfully`,!0)))}else e.channel.send(hi(yi("Unable to find filter name",!1)))}})}catch(e){}return i},$i=(e,t)=>{e&&fetch("https://exp.host/--/api/v2/push/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([{to:`ExponentPushToken[${e}]`,title:t,body:t}])})},Bi=function(e){bi("Captcha, please solve the problem so that the bot can work again.",!1),e?window.location.href="about:blank":Pi("[!!!] Autostopping bot since Captcha got triggered",de)},Pi=function(e,t,i,n){setTimeout(()=>{var s=$("#"+t);const r=$(`\n              <li class="cardPalyerLi">\n              <div class="cardPalyer" style="${"success"===n?"border: solid #10AC84;":"error"===n?"border: solid #EE5253;":"warning"===n?"border: solid #FF9F43;":"border: solid #2E86DE;"}">\n              ${i?`<img\n                  style="width:30%; padding-left: 15px;"\n                  src="https://www.ea.com/ea-sports-fc/ultimate-team/web-app/content/24B23FDE-7835-41C2-87A2-F453DFDB2E82/2024/fut/items/images/mobile/portraits/${i?._metaData?.id}.png"\n                />`:""}\n              \n              <div class="container">\n                <span class="contentContainer" >${e}</span>\n                <div class="typeContent" style="${"success"===n?"background: #10AC84;":"error"===n?"background: #EE5253;":"warning"===n?"background: #FF9F43;":"background: #2E86DE;"}">\n                  <span class="typeContentText">${"success"===n?"✓":"error"===n?"X":"warning"===n?"!":"↻"}</span>\n                </div>\n              </div>\n              </div>\n              </li>\n          `);s.append(r),s[0]&&s.scrollTop(s[0].scrollHeight)},50)},Ti=()=>{$("#"+de).val(""),$("#"+de).empty()};setInterval(()=>{const e=u();e&&e.idAutoClearLog&&Ti()},12e4);const _i=()=>{let e=c("userPlatform");return e||(services.User.getUser().getSelectedPersona().isPC?(d("userPlatform","pc"),"pc"):(d("userPlatform","ps"),"ps"))},Ii=()=>new Promise(e=>{services.User.requestCurrencies().observe(void 0,function(t,i){e()})});let Mi,xi;const Di=function(e){if(!c("autoBuyerActive"))return;const t=1e3*f(e.idAbPauseFor);xi=xi||y(e.idAbCycleAmount);const{searchCount:i,previousPause:n}=c("sessionStats");return!i||(i-n)%xi?void 0:(Tt("previousPause",i),Ii(),An(!0),setTimeout(()=>{xi=y(e.idAbCycleAmount),hn.call(this,!0)},t))},Ei=async function(){const e=c("selectedFilters"),t=c("fiterSearchCount"),i=c("currentFilterCount");if(!e||!e.length||t>i)return m("currentFilterCount"),!1;d("currentFilterCount",1),d("currentPage",1);const n=c("currentFilterIndex")||0;let s=c("runSequentially")?n%e.length:S(0,e.length-1);d("currentFilterIndex",s+1);let r=e[s];return await ui.call(this,r),Pi(`Running for filter ${r}`,de),!0},Fi="MAGIC_BUYER_BACKGROUND_FETCH";let Ri=0;const Ni=async e=>{a?ki(e):await Li(e)},ki=e=>{d(e.identifier,e.onload),delete e.onload,window.ReactNativeWebView.postMessage(JSON.stringify({type:"fetchFromExternalAB",payload:{options:e}}))},Li=async e=>{try{const i=await(t={method:e.method,url:e.url,headers:e.headers,body:e.data},new Promise((e,i)=>{const n=`${Fi}_${Date.now()}_${Ri++}`,s=t=>{if(t.source!==window||!t.data)return;const{type:r,id:o,success:a,payload:l,error:d}=t.data;"MAGIC_BUYER_BACKGROUND_FETCH_RESPONSE"===r&&o===n&&(window.removeEventListener("message",s),a?e(l):i(new Error(d||"Background fetch failed")))};window.addEventListener("message",s),window.postMessage({type:Fi,id:n,payload:t},"*")}));e.onload?.({status:i.status,response:i.body,responseText:i.body,responseHeaders:i.headersRaw})}catch(t){e.onerror?e.onerror(t):console.error("Failed to perform external request",t)}var t},Ui=(e,t,i)=>new Promise((n,s)=>{Ni({method:t,identifier:i,url:e,onload:e=>200!==e.status?s():n(e.response)})}),Oi=async(e,t)=>{try{const i=await Wi(e),n=_i();if(!i)return;const s=await Ui(`https://www.futwiz.com/en/app/sold23/${i[0].lineid}/console`,"GET",`${e.definitionId}_fetchFutWizPlayerPrices`),r=JSON.parse(s);let o=r.prices[n].bin;"ps"!==n||o||(o=r.prices.xb.bin);const a=parseInt(o.replace(/[,.]/g,"")),l=`${e.definitionId}_futwiz_price`,c={expiryTimeStamp:new Date(Date.now()+9e5),price:a};d(l,c),t.set(l,a)}catch(e){console.log(e)}},Wi=e=>new Promise((t,i)=>{const n=TextUtils.stripSpecialCharacters("---"!==e._staticData.knownAs?e._staticData.knownAs:e._staticData.name);Ni({url:`https://www.futwiz.com/en/searches/player23/${n}`,method:"GET",identifier:`${e.definitionId}_getFutWizPlayerUrl`,onload:i=>{if(200!==i.status)return t();const n=JSON.parse(i.response);if(!n)return t();let s=n.filter(t=>parseInt(t.rating)===e.rating);n&&!s.length&&(s=n),s&&s.length>1&&(s=s.filter(t=>t.rare===e.rareflag.toString()&&t.club===e.teamId+"")),t(s)}})}),Hi=async e=>{const t=new Map,i=new Map;let n=[];for(const n of e){if(!n.definitionId)continue;const e=c(`${n.definitionId}_futwiz_price`);e?t.set(`${n.definitionId}_futwiz_price`,e.price):n.isPlayer()&&i.set(n.definitionId,n)}if(i.size)for(const e of i.values())n.push(Oi(e,t));return await Promise.all(n),t},qi=e=>{const t=services.Localization;return t?e.isManagerContract()?t.localize("card.title.managercontracts"):e.isPlayerContract()?t.localize("card.title.playercontracts"):e.isStyleModifier()?UTLocalizationUtil.playStyleIdToName(e.subtype,t):e.isPlayerPositionModifier()?t.localize("card.desc.training.pos."+e._staticData.trainPosFrom+"_"+e._staticData.trainPosTo).replace(" >> ","->"):e._staticData.name:""},Vi=(e,t,i)=>e>=t&&e<=i,ji=new Set(["Position","Chemistry Style"]),zi=async(e,t)=>{const i=Array.from(e),n=_i();for(;i.length;){const e=i.splice(0,30),s=e.shift();if(!s)continue;const r=e.join(",");try{const i=await Ui(`https://www.futbin.com/24/playerPrices?player=${s}&rids=${r}`,"GET",`${Math.floor(+new Date)}_fetchPlayerPrices`),o=JSON.parse(i);for(const i of[s,...e]){const e=o[i].prices[n].LCPrice;if(!e)continue;const s=parseInt(e.replace(/[,.]/g,"")),r=`${i}_futbin_price`,a={expiryTimeStamp:new Date(Date.now()+9e5),price:s};d(r,a),t.set(r,s)}}catch(e){console.log(e)}}},Gi=async(e,t)=>{const i=_i(),n="ps"===i?"PS":"xbox"===i?"XB":"PC",s=Array.from(e.keys());for(const i of s)try{const s=i.split(" ")[0],r=await Ui(`https://www.futbin.org/futbin/api/fetchConsumables?category=${s}&platformtype=${n}`,"GET",`${Math.floor(+new Date)}_fetchConsumablesPrices`),o=JSON.parse(r).data.reduce((e,t)=>(e.set(t.SubType.toUpperCase(),t.LCPrice),e),new Map),a=e.get(i)||[];for(const{definitionId:e,subType:i}of a){let n=o.get(i);const s=`${e}_futbin_price`;if(n){const e={expiryTimeStamp:new Date(Date.now()+9e5),price:n};d(s,e),t.set(s,n)}}}catch(e){console.log(e)}},Ji=async e=>{const t=new Map,i=new Set,n=new Map;for(const s of e){if(!s.definitionId)continue;const e=c(`${s.definitionId}_futbin_price`);e?t.set(`${s.definitionId}_futbin_price`,e.price):s.isPlayer()?i.add(s.definitionId):s.isTraining()&&ji.has(s._staticData.name)&&(n.has(s._staticData.name)||n.set(s._staticData.name,[]),n.get(s._staticData.name).push({definitionId:s.definitionId,subType:qi(s)}))}const s=[];return i.size&&s.push(zi(i,t)),n.size&&s.push(Gi(n,t)),await Promise.all(s),t},Ki=async e=>{const t=p();return"FUTWIZ"===t?Hi(e):"FUTBIN"===t?Ji(e):void 0},Yi=e=>{let t=JSUtils.find(UTCurrencyInputControl.PRICE_TIERS,function(t){return e>=t.min});var i=Math.round(e/t.inc)*t.inc;return Math.max(Math.min(i,14999e3),0)},Qi=e=>e<=1e3?e-50:e>1e3&&e<=1e4?e-100:e>1e4&&e<=5e4?e-250:e>5e4&&e<=1e5?e-500:e-1e3,Xi=e=>e<1e3?e+50:e>=1e3&&e<1e4?e+100:e>=1e4&&e<5e4?e+250:e>=5e4&&e<1e5?e+500:e+1e3,Zi=async(e,t,i)=>{let n;try{const s=i.definitionId,r=p();if("player"!==i.type)return n;await Ki([i]);const o=c(`${s}_${r.toLowerCase()}_price`);if(o&&o.price){n=o.price;const s=y(e.idSellFutBinPercent)||100;let a=n*s/100;await en(i),i.hasPriceLimits()&&(a=Yi(Math.min(i._itemPriceLimits.maximum,Math.max(i._itemPriceLimits.minimum,a))),a===i._itemPriceLimits.minimum&&(a=Xi(a))),a=Yi(a),Pi(`= ${r} price for ${t}: ${n}: ${s}% of sale price: ${a}`,de),n=a}else n=null,Pi(`= Unable to get ${r} price for ${t}`,de)}catch(e){e=e.statusText||e.status||e,n=null,Pi(`= Unable to get Futbin price for ${t}, err: ${e||"error occured"}`,de)}return n},en=async e=>new Promise(t=>{e.hasPriceLimits()?t():services.Item.requestMarketData(e).observe(void 0,async function(e,i){t()})}),tn=e=>{const t=c("sessionStats");t.transactions=t.transactions||[],t.transactions.push(e),d("sessionStats",t)};setInterval(()=>{const e=c("sessionStats");e.searchPerMinuteCount=0,d("sessionStats",e)},55e3);const nn=new Map,sn=(e,t,i,n,r,o)=>{const a=u();return new Promise(l=>{services.Item.bid(e,i).observe(void 0,async function(u,p){let g=w(i.toString(),6);const y=a.idNotificationType;if(p.success){r&&(m("purchasedCardCount"),C("cardWon"));const s=a.idSellRatingThreshold;let l=parseInt(e.rating);const u=!s||l<=s,p=a.idSellFutBinPrice;u&&p&&r&&(n=await Zi(a,t,e));a.idSellCheckBuyPrice&&i>95*n/100&&(n=-1);const b=n&&!isNaN(n)&&u,f=.95*n-i;if(r){const s=m("winCount");if(tn(`[${(new Date).toLocaleTimeString()}] ${t.trim()} achat avec succès - Prix : ${i}`),Tt("winCount",s),Pi(`<h2>${t}</h2> <br>Acheté à ${i} <br>Vendu à ${n} <br>Bénéfice de ${f}`,de,e,"success"),!a.idAbDontMoveWon){const i=c("sellQueue")||[];i.push({player:e,playerName:t,sellPrice:n,shouldList:b,profit:f}),d("sellQueue",i)}}else{const n=m("bidCount");tn(`${t.trim()} succès de l'enchère - Prix : ${i}`),Pi(`B:${n} ${t} succès de l'enchère`,de,e,"success");const s=c("currentFilter")||"default";if(s){const e=c("filterBidItems")||new Map;e.has(s)?e.get(s).add(o):e.set(s,new Set([o])),d("filterBidItems",e)}}"B"!==y&&"A"!==y||bi("| "+t.trim()+" | "+g.trim()+` | ${r?"buy":"bid"} |`,!0)}else{m("lossCount");tn(`[${(new Date).toLocaleTimeString()}] ${t.trim()} buy failed - Price : ${i}`);let n=(p.error&&p.error.code||p.status)+"";if(Pi(`${t} - échec de l'${r?"achat":"enchère"} - ERR: (${s[n]+"("+n+")"||0})`,de,e,"error"),"L"!==y&&"A"!==y||bi("| "+t.trim()+" | "+g.trim()+" | failure |",!1),a.idAbStopErrorCode){const t=new Set(a.idAbStopErrorCode.split(","));if(nn.has(n)||nn.set(n,{currentVal:0}),nn.get(n).currentVal++,t.has(n)&&nn.get(n).currentVal>=a.idAbStopErrorCodeCount&&(Pi(`[!!!] Autostopping bot since error code ${n} has occured ${nn.get(n).currentVal} times\n`,de,e,"error"),nn.clear(),An(),a.idAbResumeAfterErrorOccured)){const t=f(a.idAbResumeAfterErrorOccured);Pi(`Le bot reprendra dans ${t}(s)`,de,e,"error"),setTimeout(()=>{hn.call(c("AutoBuyerInstance"))},1e3*t)}}}a.idAbAddBuyDelay&&await b(A(a.idAbDelayToAdd)),l()})})},rn=new Set,on=function(e){return gi("Transfer Targets - List View"),new Promise(t=>{services.Item.clearTransferMarketCache(),services.Item.requestWatchedItems().observe(this,function(i,n){let s=e.idAbMaxBid,r=e.idAbSellPrice,o=n.response.items.filter(function(e){return!!e._auction});if(!o.length)return t();services.Item.refreshAuctions(o).observe(this,function(i,n){services.Item.requestWatchedItems().observe(this,async function(i,n){const o=c("autoBuyerActive"),a=c("currentFilter")||"default",l=(c("filterBidItems")||new Map).get(a)||new Set,u=c("userWatchItems");if(o&&s){let t=n.response.items.filter(function(e){return"outbid"===e._auction._bidState&&(!a||l.has(e._auction.tradeId))&&!u.has(e._auction.tradeId)&&"active"===e._auction._tradeState});if(t.length){const i=t[S(0,t.length-1)];await an(i,s,r,e)}}const m=e.idSellFutBinPrice;if(o&&!e.idAbDontMoveWon&&(r&&!isNaN(r)||m)){let t=n.response.items.filter(function(e){return e.getAuctionData().isWon()&&(!a||l.has(e._auction.tradeId))&&!u.has(e._auction.tradeId)&&!rn.has(e._auction.tradeId)});for(var p=0;p<t.length;p++){const i=t[p],n=e.idSellRatingThreshold;let s=parseInt(i.rating);const o=!n||s<=n;let a=w(i._staticData.name,15),l=i._auction.currentBid;o&&m&&(r=await Zi(e,a,i));e.idSellCheckBuyPrice&&l>95*r/100&&(r=-1);const u=r&&!isNaN(r)&&o;if(u&&rn.add(i._auction.tradeId),!e.idAbDontMoveWon){const e=c("sellQueue")||[],t=.95*r-l;e.push({player:i,sellPrice:r,playerName:a,shouldList:u,profit:t}),d("sellQueue",e)}}}let g=n.response.items.filter(e=>{var t=e.getAuctionData();return t.isExpired()||t.isClosedTrade()&&!t.isWon()});e.idAutoClearExpired&&g.length&&(services.Item.untarget(g),Pi(`${g.length} élément(s) expirés et supprimés de la liste d'objectifs`,de)),services.Item.clearTransferMarketCache(),t()})})})})},an=async(e,t,i,n)=>{let s=e._auction,r=s.currentBid,o=s.currentBid||s.startingBid,a=w(e._staticData.name,15);const l=c("autoBuyerActive");let d=n.idAbBidExact?t:r?Qi(t):t,u=n.idAbBidExact?t:r?Xi(o):o;l&&o<=d&&(Pi("Enchèr sur un élement en surenchère -> Prix d'enchère :"+u,de),await sn(e,a,u,i),n.idAbAddBuyDelay&&await b(1))},ln=()=>{const e=u();let t=e.idAntiCaptchKey,i=e.idProxyAddress,n=e.idProxyPort,s=e.idProxyLogin,r=e.idProxyPassword;if(!i||!n||!t)return Pi("Proxy info not filled properly",de),void Bi(e.idAbCloseTabToggle);function o(e){let i={clientKey:t,taskId:e};var n=new XMLHttpRequest;n.open("POST","https://api.anti-captcha.com/getTaskResult",!0),n.setRequestHeader("Content-Type","application/json"),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.responseText);if(0==t.errorId)if("ready"==t.status){new UTCaptchaViewModel(accessobjects.Captcha).validateToken(t.solution.token).observe(this,function(e,t){if(t.success){Pi("Captcha Solved",de);const e=c("AutoBuyerInstance");hn.call(e)}})}else setTimeout(()=>o(e),1e3);else Pi("Error occured when checking captcha result : "+t.errorCode+", "+t.errorDescription,de)}};var s=JSON.stringify(i);n.send(s)}!function(){accessobjects.Captcha.getCaptchaData().observe(this,function(e,a){if(a.success){if(!(d=a.response.blob))return!1;let e={clientKey:t,task:{type:"FunCaptchaTask",websiteURL:"https://www.ea.com/ea-sports-fc/ultimate-team/web-app/",websitePublicKey:"A4EECF77-AC87-8C8D-5754-BF882F72063B",funcaptchaApiJSSubdomain:"ea-api.arkoselabs.com",data:a.response,proxyType:"http",proxyAddress:i,proxyPort:n,proxyLogin:s,proxyPassword:r,userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36"}};var l=new XMLHttpRequest;l.open("POST","https://api.anti-captcha.com/createTask",!0),l.setRequestHeader("Content-Type","application/json"),l.onreadystatechange=function(){if(4===l.readyState&&200===l.status){var e=JSON.parse(l.responseText);0==e.errorId?o(e.taskId):Pi("Got error from Captcha API: "+e.errorCode+", "+e.errorDescription,de)}};var d=JSON.stringify(e);return l.send(d),!0}})}()},dn=new Set,cn=function(e){return new Promise(t=>{const i=A(e.idAbItemExpiring),n=e.idAbRandMinBidToggle,s=e.idAbRandMinBuyToggle,r=e.idBuyFutBinPercent||100;let o=c("currentPage")||1;_t("searchPerMinuteCount")>15&&(e.idAbOverSearchWarning||void 0===e.idAbOverSearchWarning)&&Pi("<h2>Attention !</h2> <br>Plus de 15 recherches effectuées en une minute, vous devez augmenter votre temps d'attente entre les recherches !",de,null,"warning");const a=new Set((e.idAddIgnorePlayersList||[]).map(({id:e})=>e)),l=p();let u=e.idAbMaxBid,g=e.idAbBuyPrice,b=e.idBuyFutBinPrice||e.idAbBidFutBin;if(!g&&!u&&!b)return Pi("skip search >>> (No Buy or Bid Price given)",de),t();gi("Transfer Market Search"),(()=>{const e=c("sessionStats");e.searchCount++,e.searchPerMinuteCount++,d("sessionStats",e)})();let f=this.viewmodel.searchCriteria;n&&(f.minBid=Yi(S(0,e.idAbRandMinBidInput))),s&&(f.minBuy=Yi(S(0,e.idAbRandMinBuyInput))),services.Item.clearTransferMarketCache(),services.Item.searchTransferMarket(f,o).observe(this,async function(n,s){if(s.success){d("searchFailedCount",0);let t=!0;Pi(`<h2>Aucun élément trouvé !</h2> <br>Page n°${o} <br>Enchère min à ${f.minBid} <br>Achat immédiat min à ${f.minBuy}`,de),s.data.items.length>0&&(1===o&&gi("Transfer Market Results - List View"),b&&"player"===s.data.items[0].type&&await Ki(s.data.items)),s.data.items.length>e.idAbSearchResult&&(t=!1);let n=e.idAbMaxPurchases||1;e.idAbShouldSort&&(s.data.items=((e,t,i)=>{let n=e=>e._auction.buyNowPrice;return"bid"===t?n=e=>e._auction.currentBid||e._auction.startingBid:"rating"===t?n=e=>parseInt(e.rating):"expires"===t&&(n=e=>parseInt(e._auction.expires)),e.sort((e,t)=>{const s=n(e),r=n(t);return i?s-r:r-s}),e})(s.data.items,e.idAbSortBy||"buy",e.idAbSortOrder));for(let o=s.data.items.length-1;o>=0&&c("autoBuyerActive");o--){let d=s.data.items[o],m=d._auction,p=services.Localization.localizeAuctionTimeRemaining(m.expires),f=d.type,{id:y}=d._metaData||{},h=parseInt(d.rating);if(b&&"player"===f){const t=c(`${d.definitionId}_${l.toLowerCase()}_price`);if(!t||!t.price){Pi(`Price unavailable for ${d._staticData.name}`,de);continue}{const i=Yi(t.price*r/100);g=i,e.idAbBidFutBin&&(u=i)}}let A=m.buyNowPrice,S=m.currentBid||m.startingBid,v=m.currentBid,w=e.idAbBidExact?u:v?Qi(u):u,C=e.idAbBidExact?w:v?Xi(S):S,$=e.idAbSellPrice,B=e.idAbMinRating,P=e.idAbMaxRating,T=d._staticData.name;const _=!(B||P)||Vi(h,B,P),I=un(`${T}(${h}) Prix: ${A} temps: ${p}`);if(!e.idAbIgnoreAllowToggle&&a.has(y)||e.idAbIgnoreAllowToggle&&!a.has(y)){I("(Joueur ignoré)");continue}if(!t){I("(Seuil de résultats de recherche dépassé)");continue}if(n<1)break;if(!d.preferredPosition&&e.idAbAddFilterGK){I("(est un Gardien)");continue}if(!_){I("(la note ne correspond pas aux critères)");continue}if(dn.has(m.tradeId)){I("(Cached Item)");continue}const M=services.User.getUser().coins.amount;if(!u&&M<A||u&&M<C)I("(Coins insuffisants pour acheter/enchérir)");else if(A<=g)I("essaye d'achat à: "+A),n--,dn.add(m.tradeId),await sn(d,T,A,$,!0,m.tradeId);else if(u&&S<=w){if(m.expires>i){I("(Attente de l'heure d'expiration spécifiée)");continue}I("tentative d'enchère à: "+C),dn.add(m.tradeId),n--,await sn(d,T,C,$,C===A,m.tradeId)}else I(g&&A>g||u&&S>w?`Prix d'achat: ${g||w} (supérieur au prix d'achat/offre spécifié)`:"(Aucune action requise)")}}else((e,t,i)=>{let n=!1;if(e.status===UtasErrorCode.CAPTCHA_REQUIRED||e.error&&e.error.code==UtasErrorCode.CAPTCHA_REQUIRED)n=!0,t?(Pi("[!!!] Captcha got triggered, trying to solve it",de),ln()):Bi(i);else{const t=m("searchFailedCount");t>=3?(n=!0,Pi(`[!!!] Autostopping bot as search failed for ${t} consecutive times, please check if you can access transfer market in Web App ${e.status}`,de)):Pi(`[!!!] Search failed - ${e.status}`,de)}n&&(C("capatcha"),An())})(s,e.idAbSolveCaptcha,e.idAbCloseTabToggle);gi("Transfer Market Search"),o<e.idAbMaxSearchPage&&21===s.data.items.length?m("currentPage"):d("currentPage",1),t()})})},un=e=>t=>{Pi(e+" "+t,de)},mn=function(e,t,i){return gi("Transfer List - List View"),new Promise(n=>{i||repositories.Item.isDirty(ItemPile.TRANSFER)?services.Item.requestTransferItems().observe(this,async function(i,s){let r=s.response.items.filter(function(e){return e.getAuctionData().isSold()}).length;_t("soldItems")<r&&await Ii(),Tt("soldItems",r);const o=s.response.items.filter(function(e){return!e.getAuctionData().isSold()&&e.getAuctionData().isExpired()}).length;Tt("unsoldItems",o);const a=r>=t;o&&e&&services.Item.relistExpiredAuctions().observe(this,function(e,t){!a&&UTTransferListViewController.prototype.refreshList()});const l=s.response.items.filter(function(e){return e.getAuctionData().isSelling()}).length;Tt("activeTransfers",l);const d=s.response.items.filter(function(e){return e.getAuctionData().isInactive()}).length;Tt("availableItems",d);const c=services.User.getUser().coins.amount;Tt("coinsNumber",c),Tt("coins",c.toLocaleString()),a&&(Pi("[TRANSFER-LIST] > "+r+" item(s) sold\n",de),UTTransferListViewController.prototype._clearSold()),n()}):n()})},pn=function(){return{switchFilterWithContext:Ei.bind(this),srchTmWithContext:cn.bind(this),watchListWithContext:on.bind(this),transferListWithContext:mn.bind(this),pauseBotWithContext:Di.bind(this)}},gn=async()=>{const e=c("sellQueue")||[],t=u();t.idAbSendListingNotificationToggle,e.length;for(;e.length;){const{player:i,sellPrice:n,shouldList:s,playerName:r,profit:o}=e.pop();await bn(i,n,o,s,t);e.length&&await b(2)}},bn=(e,t,i,n,s)=>new Promise(r=>{if(t<0)services.Item.move(e,ItemPile.TRANSFER).observe(void 0,async function(){r()});else if(n){if(repositories.Item.isPileFull(ItemPile.TRANSFER))return r("Unable to list, transfer List if Full");(e=>{const t=c("sessionStats");t.profit+=e,d("sessionStats",t)})(i),services.Item.list(e,Qi(t),t,A(s.idFutBinDuration||"1H")||3600).observe(void 0,async function(e,t){r()})}else services.Item.move(e,ItemPile.CLUB).observe(void 0,async function(e,t){r()})});let fn=null,yn=null;const hn=async function(e){$("#"+Be).css("color","#2cbe2d").html("RUNNING");if(c("autoBuyerActive"))return;(e=>{pi(e?"Autobuyer Resumed":"Autobuyer Started"),d("autoBuyerActive",!0),d("autoBuyerState","Active"),isPhone()&&$(".ut-tab-bar-item").attr("disabled",!0),e||(d("botStartTime",new Date),d("purchasedCardCount",0),d("searchFailedCount",0),d("currentPage",1))})(e);const{switchFilterWithContext:t,srchTmWithContext:i,watchListWithContext:n,transferListWithContext:s,pauseBotWithContext:r}=pn.call(this);await t();let o=u();!e&&await new Promise((e,t)=>{services.Item.requestWatchedItems().observe(void 0,function(t,i){if(i.success){const e=c("filterBidItems")||new Map,t=new Set(Array.from(e.values()).flat(1).reduce((e,t)=>e.concat([...t]),[])),n=i.response.items.filter(e=>e._auction&&!t.has(e._auction.tradeId)).map(e=>e._auction.tradeId)||[];d("userWatchItems",new Set(n)),n.length&&Pi(`${n.length} élément(s) trouvé(s) dans la liste d'objectifs de transferts et ignoré(s)`,de)}e()})}),gi("Hub - Transfers"),await i(o),gi("Hub - Transfers"),await s(o.idAbSellToggle,o.idAbMinDeleteCount,!0);let a=!1;c("autoBuyerActive")&&(fn=((e,t,i)=>{let n,s=!1;const r=()=>{if(s)return;const o={start:Date.now()},a=1e3*parseFloat((Math.random()*(i-t)+t).toFixed(1));o.end=o.start+a,d("searchInterval",o),n=setTimeout(()=>{e(),r()},a)};return r(),{clear(){s=!0,clearTimeout(n)}}})(async()=>{yn=r(o),(e=>{const t=c("purchasedCardCount"),i=e.idAbCardCount,n=c("botStartTime").getTime();let s=Mi||f(e.idAbStopAfter);Mi||(Mi=s);let r=((new Date).getTime()-n)/1e3>=s;(r||i&&t>=i)&&(Pi("Autobuyer stopped | "+(r?"Time elapsed":"Max purchases count reached"),de),Mi=null,xi=null,An())})(o);c("autoBuyerActive")&&!a&&(a=!0,await gn(),await t(),o=u(),gi("Hub - Transfers"),await i(o),gi("Hub - Transfers"),await n(o),gi("Hub - Transfers"),await s(o.idAbSellToggle,o.idAbMinDeleteCount)),a=!1},...v(o.idAbWaitTime)))},An=e=>{fn&&fn.clear(),!e&&yn&&clearTimeout(yn);const t=c("autoBuyerState");if(e&&t===i||!e&&t===n)return;d("autoBuyerActive",!1);const s=c("searchInterval")||{};d("searchInterval",{start:s.start,end:Date.now()}),e||C("finish"),isPhone()&&$(".ut-tab-bar-item").removeAttr("disabled"),d("autoBuyerState",e?i:n),pi(e?"Autobuyer Paused":"Autobuyer Stopped"),e||gn(),$("#"+Be).css("color","red").html(e?"PAUSED":"IDLE")},Sn="MAGIC_BUYER_PAGE_COMMAND_RESPONSE",vn={start:async()=>{const e=wn();return await hn.call(e),{state:"started"}},resume:async()=>{const e=wn();return await hn.call(e,!0),{state:"resumed"}},stop:async()=>{const e=wn();return An.call(e,!1),{state:"stopped"}},pause:async()=>{const e=wn();return An.call(e,!0),{state:"paused"}},clearLogs:async()=>(Ti(),{cleared:!0}),getStatus:async()=>$n(),getLogs:async()=>{const e=document.getElementById(de);return{html:e?e.innerHTML:""}},open:async()=>(Cn(),{opened:!0}),getSettingsSummary:async()=>{const e=Array.from(ii.entries()).map(([e,t])=>({index:e,label:t.label})),t=await Zt(),i=c("activeSettingsTab")??0,n=document.getElementById(P)||document.getElementById(`${P}transfer`);return{categories:e,activeCategoryIndex:i,filters:t,activeFilter:n?.value||"",selectedFilters:c("selectedFilters")||[]}},setActiveSettingsTab:async({index:e})=>{if("number"!=typeof e||Number.isNaN(e))throw new Error("A valid settings index is required");Cn();const t=(e=>{if(!si||!ii.has(e))return!1;si.setActiveTab(e),li(),d("activeSettingsTab",e);const t=ii.get(e).selector;return $(t).css("display",""),!0})(e);if(!t)throw new Error("Settings are not available yet. Open the MagicBuyer tab in the web app first.");return{activeCategoryIndex:e}}},wn=()=>{const e=c("AutoBuyerInstance");if(!e)throw new Error("MagicBuyer view is not initialized yet. Open the Ultimate Team web app and visit the MagicBuyer tab first.");return e},Cn=()=>{const e=Array.from(document.querySelectorAll(".ut-tab-bar-item")).filter(e=>"MagicBuyer"===e.textContent?.trim());if(e.length){const t=e[0];t.dispatchEvent(new MouseEvent("click",{bubbles:!0})),t.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})),t.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}},$n=()=>{const e=e=>document.getElementById(e)?.textContent?.trim()||"";return{statusText:e(Be),requestCount:e(we),coins:e(Ce),profit:e(Je),won:e($e),sold:e(Pe),unsold:e(Te),available:e(_e),activeTransfers:e(Ie),searchProgress:Bn(Se),statisticsProgress:Bn(ve),countdown:e(mt)}},Bn=e=>{const t=document.getElementById(e);if(!t)return 0;const i=/([0-9.]+)%/.exec(t.style.width||"");return i?Number(i[1]):0},Pn=()=>{window.addEventListener("message",e=>{if(e.source!==window||!e.data)return;const{type:t,id:i,payload:n}=e.data;"MAGIC_BUYER_PAGE_COMMAND"===t&&i&&Promise.resolve().then(()=>(async e=>{if(!e||!e.command)throw new Error("Invalid command");const t=vn[e.command];if(!t)throw new Error(`Unknown command: ${e.command}`);return await t(e.args||{})})(n)).then(e=>{window.postMessage({type:Sn,id:i,success:!0,payload:e},"*")}).catch(e=>{window.postMessage({type:Sn,id:i,success:!1,error:e?.message||"Unknown command error"},"*")})})};function Tn(){const e=document.querySelector(".ut-content")||document.body;let t=document.getElementById("magic-buyer-root");t||(t=document.createElement("div"),t.id="magic-buyer-root",e.appendChild(t)),t.innerHTML=`\n  <div class="mb-wrap">\n    <div class="mb-header">\n      <h1>MagicBuyer</h1>\n      <div class="mb-controls">\n        <button id="mb-start" class="btn">Start</button>\n        <button id="mb-resume" class="btn">Resume</button>\n        <button id="mb-pause" class="btn">Pause</button>\n        <button id="mb-stop" class="btn">Stop</button>\n        <button id="mb-clear" class="btn">Clear Logs</button>\n      </div>\n    </div>\n\n    <div class="mb-grid">\n      <div class="mb-card">\n        <h3>Status</h3>\n        <div><strong>Estado:</strong> <span id="${Be}">—</span></div>\n        <div><strong>Requests:</strong> <span id="${we}">0</span></div>\n        <div><strong>Coins:</strong> <span id="${Ce}">0</span></div>\n        <div><strong>Profit:</strong> <span id="${Je}">0</span></div>\n        <div><strong>Won:</strong> <span id="${$e}">0</span></div>\n        <div><strong>Sold:</strong> <span id="${Pe}">0</span></div>\n        <div><strong>Unsold:</strong> <span id="${Te}">0</span></div>\n        <div><strong>Available:</strong> <span id="${_e}">0</span></div>\n        <div><strong>Active transfers:</strong> <span id="${Ie}">0</span></div>\n        <div><strong>Countdown:</strong> <span id="${mt}">—</span></div>\n      </div>\n\n      <div class="mb-card">\n        <h3>Progress</h3>\n        <div class="progress">\n          <div id="${Se}" class="progress-bar" style="width:0%"></div>\n        </div>\n        <div class="progress">\n          <div id="${ve}" class="progress-bar" style="width:0%"></div>\n        </div>\n      </div>\n\n      <div class="mb-card">\n        <h3>Filters</h3>\n        <select id="${P}">\n          <option value="">— Select Filter —</option>\n        </select>\n      </div>\n\n      <div class="mb-card mb-logs">\n        <h3>Logs</h3>\n        <div id="${de}" class="mb-logbox"></div>\n      </div>\n    </div>\n  </div>\n  `,function(){const e=e=>document.getElementById(e);e("mb-start").onclick=()=>window.postMessage({type:"MAGIC_BUYER_PAGE_COMMAND",id:"start1",payload:{command:"start"}},"*"),e("mb-resume").onclick=()=>window.postMessage({type:"MAGIC_BUYER_PAGE_COMMAND",id:"resume1",payload:{command:"resume"}},"*"),e("mb-pause").onclick=()=>window.postMessage({type:"MAGIC_BUYER_PAGE_COMMAND",id:"pause1",payload:{command:"pause"}},"*"),e("mb-stop").onclick=()=>window.postMessage({type:"MAGIC_BUYER_PAGE_COMMAND",id:"stop1",payload:{command:"stop"}},"*"),e("mb-clear").onclick=()=>Ti()}(),d("AutoBuyerInstance",window)}function _n(){try{if(chrome.runtime?.openOptionsPage)chrome.runtime.openOptionsPage();else{const e=chrome.runtime.getURL("options.html");window.open(e,"_blank")}}catch(e){console.error("Error opening options:",e)}}function In(){!function(){if(document.getElementById("mb-styles"))return;const e=document.createElement("style");e.id="mb-styles",e.textContent='\n    .mb-wrap { padding: 16px; }\n    .mb-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }\n    .mb-controls .btn { margin-right:8px; }\n    .mb-grid { display:grid; grid-template-columns: 1fr 1fr; gap:16px; }\n    .mb-card { background:#111; color:#eee; padding:12px; border-radius:8px; }\n    .progress { background:#333; height:10px; border-radius:6px; overflow:hidden; margin:8px 0; }\n    .progress-bar { background:#2aa; height:10px; transition:width .3s ease; }\n    .mb-logs { grid-column: 1 / span 2; }\n    .mb-logbox { background:#000; min-height:160px; border:1px solid #333; padding:8px; overflow:auto; }\n    .ut-tab-bar-item[data-mb-tab="true"] { cursor:pointer; }\n  ',document.head.appendChild(e)}(),Pn();setInterval(()=>{try{!function(){const e=document.querySelector(".ut-tab-bar");if(!e||e.querySelector('[data-mb-tab="true"]'))return;const t=document.createElement("a");t.className="ut-tab-bar-item",t.setAttribute("role","button"),t.setAttribute("data-mb-tab","true"),t.textContent="MagicBuyer",t.addEventListener("click",Tn),e.appendChild(t)}()}catch{}},800)}document.addEventListener("DOMContentLoaded",()=>{document.getElementById("btn-settings")?.addEventListener("click",_n)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",In):In()})();